var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function o(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),game;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.m_nTimeOnEnterFrame=0,n.m_aClickBtns=[],n.m_oHandle=new e.Handle,n.once(eui.UIEvent.COMPLETE,n.fOnUICreate,n),n}return __extends(n,t),n.prototype.fOnUICreate=function(){this.addEventListener(egret.Event.ENTER_FRAME,this.fEnterFrame,this),this.m_nTimeOnEnterFrame=egret.getTimer()},n.prototype.fEnterFrame=function(){this.fUpdate(egret.getTimer()-this.m_nTimeOnEnterFrame),this.m_nTimeOnEnterFrame=egret.getTimer()},n.prototype.fSceneResGroup=function(){return""},n.prototype.fUpdate=function(e){},n.prototype.fSetClickButton=function(t){-1==this.m_aClickBtns.indexOf(t)&&(this.m_aClickBtns.push(t),t instanceof e.Button?t.fBindListener(this):t instanceof eui.RadioButton?t.addEventListener(egret.Event.CHANGE,this.fTouchTap,this):t.addEventListener(egret.TouchEvent.TOUCH_TAP,this.fTouchTap,this))},n.prototype.fTouchTap=function(e){var t=e.currentTarget;this.fOnClick(t)},n.prototype.fOnClick=function(e){},n.prototype.fRelease=function(){for(var e in this.m_aClickBtns);},n.prototype.fRemoveClickEvent=function(t){t instanceof e.Button?t.fRelease():t.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.fTouchTap,this)},n}(eui.Component);e.Scene=t,__reflect(t.prototype,"game.Scene")}(game||(game={}));var game;!function(e){var t=function(){function t(){}return t.prototype.fWrite=function(){var t=new e.GameByteArray;return t.writeShort(this.m_nPktType),t},t.prototype.fRead=function(e){this.m_nPktLen=e.readShort(),this.m_nPktType=e.readShort()},t}();__reflect(t.prototype,"PacketHead");var n=function(){function n(){this.m_oHead=new t}return n.prototype.fWrtie=function(){return this.m_oHead.fWrite()},n.prototype.fRead=function(e){this.m_oHead.fRead(e)},n.prototype.fGetHead=function(){return this.m_oHead},n.CreateAction=function(t){var o;switch(t){case n.s_Eat:o=new e.C2s_EatAction;break;case n.s_PlayHand:o=new e.C2s_PlayHandAction;break;case n.s_ReadyPlay:o=new e.C2s_ReadyPacket;break;case n.s_LaunchPai:o=new e.C2s_LaunchPaiPacket;break;case n.s_CreateRoom:o=new e.C2s_CreateRoomPacket;break;default:alert("C2s_ActionBase.CreateAction fail "+t)}return o},n.prototype.fGetActionType=function(){return this.m_sActionType},n.fCreatePkt=function(t){var n=null;switch(t){case e.Protocol.s_C2S_HEARDBEAT:n=new e.C2s_HeartBeat;break;default:alert("fCreatePkt fail"+t)}return n},n.s_Eat="eat_pai",n.s_PlayHand="chu_pai",n.s_ReadyPlay="ready",n.s_LaunchPai="launch_pai",n.s_CreateRoom="create_room",n.s_BaseAct="base_act",n.s_Login="login",n.s_Heart="heart",n}();e.Packet=n,__reflect(n.prototype,"game.Packet")}(game||(game={}));var game;!function(e){var t=function(){function t(e){this.m_aAction=[],this.m_sValue=e}return t.prototype.fGetType=function(){return this.m_sType},t.prototype.fSetType=function(e){this.m_sType=e},t.prototype.fGetValue=function(){return this.m_sValue},t.prototype.fSetValue=function(e){this.m_sValue=e},t.fCreateCard=function(t,n){switch(t){case e.FengCard.s_Type_Feng:return new e.FengCard(n);case e.HuaCard.s_Type_Hua:return new e.HuaCard(n);case e.JianCard.s_Type_Jian:return new e.JianCard(n);case e.TiaoCard.s_Type_Tiao:return new e.TiaoCard(n);case e.WanCard.s_Type_Wan:return new e.WanCard(n);case e.WanCard.s_Type_Tong:return new e.TongCard(n);default:return alert("生成Card失败"+t+n),null}},t.s_Type_Feng="feng",t.s_Value_Feng_Dong="f_d",t.s_Value_Feng_Nan="f_n",t.s_Value_Feng_Xi="f_x",t.s_Value_Feng_Bei="f_b",t.s_Type_Hua="hua",t.s_Value_Hua_Chun="h_c",t.s_Value_Hua_Xia="h_x",t.s_Value_Hua_Qiu="h_q",t.s_Value_Hua_Dong="h_d",t.s_Value_Hua_Mei="h_m",t.s_Value_Hua_Lan="h_l",t.s_Value_Hua_Zhu="h_z",t.s_Value_Hua_Ju="h_j",t.s_Type_Jian="jian",t.s_Value_Jian_Zhong="j_z",t.s_Value_Jian_Fa="j_f",t.s_Value_Jian_Bai="j_b",t.s_Type_Tiao="tiao",t.s_Value_Tiao_1="t_1",t.s_Value_Tiao_2="t_2",t.s_Value_Tiao_3="t_3",t.s_Value_Tiao_4="t_4",t.s_Value_Tiao_5="t_5",t.s_Value_Tiao_6="t_6",t.s_Value_Tiao_7="t_7",t.s_Value_Tiao_8="t_8",t.s_Value_Tiao_9="t_9",t.s_Type_Tong="tong",t.s_Value_Tong_1="t_1",t.s_Value_Tong_2="t_2",t.s_Value_Tong_3="t_3",t.s_Value_Tong_4="t_4",t.s_Value_Tong_5="t_5",t.s_Value_Tong_6="t_6",t.s_Value_Tong_7="t_7",t.s_Value_Tong_8="t_8",t.s_Value_Tong_9="t_9",t.s_Type_Wan="wan",t.s_Value_Wan_1="w_1",t.s_Value_Wan_2="w_2",t.s_Value_Wan_3="w_3",t.s_Value_Wan_4="w_4",t.s_Value_Wan_5="w_5",t.s_Value_Wan_6="w_6",t.s_Value_Wan_7="w_7",t.s_Value_Wan_8="w_8",t.s_Value_Wan_9="w_9",t}();e.CardBase=t,__reflect(t.prototype,"game.CardBase")}(game||(game={}));var game;!function(e){var t=function(){function e(){this.m_nMaxSceneCount=5,this.m_oSceneStack=[]}return e.prototype.fGetTopScene=function(){return this.m_oSceneStack.length<1?null:this.m_oSceneStack[this.m_oSceneStack.length-1]},e.prototype.fAddScene=function(e){var t=this.fGetTopScene();return this.m_oLastScene=t,void 0!=e&&t!=e?(this.m_oSceneStack.length>=this.m_nMaxSceneCount&&this.m_oSceneStack.shift(),this.m_oSceneStack.push(e),!0):!1},e.prototype.fGetSceneStackLength=function(){return this.m_oSceneStack.length},e.prototype.fClear=function(){this.m_oSceneStack=[]},e.prototype.fGetLastScene=function(){return this.m_oLastScene},e.prototype.fPop=function(){this.m_oLastScene=this.fGetTopScene(),this.m_oSceneStack.pop()},e}();e.SceneManager=t,__reflect(t.prototype,"game.SceneManager")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.m_aCards=[],n.m_oHead.m_nPktType=e.Protocol.s_C2S_BASE,n.m_sActionType=e.Packet.s_BaseAct,n}return __extends(n,t),n.prototype.fGetCurrPlayrPos=function(){return this.m_pCurrentPlayer},n.prototype.fGetBelongPlayerPos=function(){return this.m_pBelongPlayer},n.prototype.fGetCards=function(){return this.m_aCards},n.prototype.fSetCards=function(e){this.m_aCards=e},n.prototype.fWrite=function(){var e=t.prototype.fWrtie.call(this);e.writeInt(this.m_pBelongPlayer),e.writeInt(this.m_pCurrentPlayer),e.writeShort(this.m_nCardsCount);for(var n in this.m_aCards)e.writeUTF(this.m_aCards[n].fGetType()),e.writeUTF(this.m_aCards[n].fGetValue());return e},n.prototype.fRead=function(n){t.prototype.fRead.call(this,n),this.m_pBelongPlayer=n.readInt(),this.m_pCurrentPlayer=n.readInt(),this.m_nCardsCount=n.readShort();for(var o,r,a=0;a<this.m_nCardsCount;a++){o=n.readUTF(),r=n.readUTF();var i=e.CardBase.fCreateCard(o,r);this.m_aCards.push(i)}},n}(e.Packet);e.C2s_ActionBase=t,__reflect(t.prototype,"game.C2s_ActionBase")}(game||(game={}));var game;!function(e){var t;!function(e){e[e.TYPE_ZOOM=0]="TYPE_ZOOM",e[e.TYPE_DROP=1]="TYPE_DROP"}(t=e.DIALOG_PLAYTYPE||(e.DIALOG_PLAYTYPE={}));var n=function(e){function n(){var t=e.call(this)||this;return t.offsetX=0,t.offsetY=0,t}return __extends(n,e),n.fSetDialogLayer=function(e){n.defaultLayer=e},n.prototype.fSetOffset=function(e,t){this.offsetX=e,this.offsetY=t},n.prototype.fShow=function(e){this.dialogLayer=n.defaultLayer,e&&(this.dialogLayer=e),this.anchorOffsetX=this.width/2,this.anchorOffsetY=this.height/2,this.x=568+this.offsetX,this.y=320+this.offsetY,n.fAddDialog(this,this.dialogLayer)},n.prototype.fShowPlay=function(e,n){switch(this.fShow(n),e){case t.TYPE_ZOOM:this.fPlayAnimationZoom();break;case t.TYPE_DROP:this.fPlayAnimationDrop()}},n.prototype.fPlayAnimationZoom=function(e){this.scaleY=.1;var t=egret.Tween.get(this);t.to({scaleY:1.1},150,egret.Ease.getPowIn(2)),t.to({scaleY:1},150,egret.Ease.getPowIn(2)),e&&t.call(e)},n.prototype.fPlayAnimationDrop=function(e){var t=this.y;this.y=-this.height/2;var n=egret.Tween.get(this);n.to({y:t},200,egret.Ease.getPowIn(2)),n.to({y:t-20},100,egret.Ease.getPowOut(2)),n.to({y:t},100,egret.Ease.getPowOut(2)),e&&n.call(e)},n.prototype.fExit=function(){n.removeDialog(this,this.dialogLayer)},n.fAddDialog=function(e,t){var n=new eui.Image("global_ui_dialog_bg_png");n.width=480,n.height=800,n.touchEnabled=!0,t.addChild(n),e.bgMask=n,t.addChild(e)},n.removeDialog=function(e,t){e.fRelease(),t.contains(e)&&(t.removeChild(e.bgMask),t.removeChild(e))},n.fHasDialog=function(){return n.defaultLayer.numElements>0},n}(e.Scene);e.ShowLayer=n,__reflect(n.prototype,"game.ShowLayer")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.m_oHead.m_nPktType=e.Protocol.s_C2S_LOGIN,n.m_sActionType=e.Packet.s_Login,n.m_nLoginType=0,n}return __extends(n,t),n.prototype.fRead=function(e){t.prototype.fRead.call(this,e),this.m_sUid=e.readUTF(),this.m_nLoginType=e.readShort()},n.prototype.fWrite=function(){var e=t.prototype.fWrtie.call(this);return e.writeUTF(this.m_sUid),e.writeShort(this.m_nLoginType),e},n}(e.Packet);e.S2C_GameLogin=t,__reflect(t.prototype,"game.S2C_GameLogin")}(game||(game={}));var game;!function(e){var t=function(e){function t(n){var o=e.call(this,n)||this;return o.fSetType(t.s_Type_Jian),o}return __extends(t,e),t}(e.CardBase);e.JianCard=t,__reflect(t.prototype,"game.JianCard")}(game||(game={}));var game;!function(e){var t=function(e){function t(n){var o=e.call(this,n)||this;return o.fSetType(t.s_Type_Tiao),o}return __extends(t,e),t}(e.CardBase);e.TiaoCard=t,__reflect(t.prototype,"game.TiaoCard")}(game||(game={}));var game;!function(e){var t=function(e){function t(n){var o=e.call(this,n)||this;return o.fSetType(t.s_Type_Wan),o}return __extends(t,e),t}(e.CardBase);e.TongCard=t,__reflect(t.prototype,"game.TongCard")}(game||(game={}));var game;!function(e){var t=function(e){function t(n){var o=e.call(this,n)||this;return o.fSetType(t.s_Type_Wan),o}return __extends(t,e),t}(e.CardBase);e.WanCard=t,__reflect(t.prototype,"game.WanCard")}(game||(game={}));var game;!function(e){var t=function(){function t(){}return t.prototype.fSendMessage=function(t,n){n?e.Poster.Ins.dispatchEvent(new e.MessageEvent(t,n)):e.Poster.Ins.dispatchEvent(new e.MessageEvent(t))},t.prototype.fReceiveMessage=function(t,n){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];this.m_oContent=t,this.m_fMessListener=n,this.m_aMsgName=o;var a=e.Poster.Ins;for(var i in o)a.addEventListener(o[i],n,t)},t.prototype.fReceiveOnce=function(t,n){for(var o=[],r=2;r<arguments.length;r++)o[r-2]=arguments[r];this.m_oOnceContent=t,this.m_fOnceListener=n,this.m_aOnceMsgName=o;var a=e.Poster.Ins;for(var i in o)a.once(o[i],n,t);a=null},t.prototype.fRelease=function(){var t=e.Poster.Ins;if(this.m_fMessListener)for(var n in this.m_aMsgName)t.removeEventListener(this.m_aMsgName[n],this.m_fMessListener,this.m_oContent);if(this.m_fOnceListener)for(var n in this.m_aMsgName)t.removeEventListener(this.m_aOnceMsgName[n],this.m_fOnceListener,this.m_oOnceContent)},t}();e.Handle=t,__reflect(t.prototype,"game.Handle")}(game||(game={}));var game;!function(e){var t=function(e){function t(t,n){var o=e.call(this,t)||this;return o.m_oDisObj=n,o.m_sName=t,o}return __extends(t,e),t}(egret.Event);e.MessageEvent=t,__reflect(t.prototype,"game.MessageEvent")}(game||(game={}));var game;!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t,"Ins",{get:function(){return null==this.s_Ins&&(this.s_Ins=new t),this.s_Ins},enumerable:!0,configurable:!0}),t}(egret.EventDispatcher);e.Poster=t,__reflect(t.prototype,"game.Poster")}(game||(game={}));var game;!function(e){var t;!function(e){e[e.e_Unknow=-1]="e_Unknow",e[e.e_Up=0]="e_Up",e[e.e_Down=1]="e_Down",e[e.e_Left=2]="e_Left",e[e.e_Right=3]="e_Right"}(t=e.PlayePosition||(e.PlayePosition={}));var n=function(){function e(e){this.m_aHandCards=[],this.m_aEatCards=[],this.m_aPengCards=[],this.m_aGangCards=[],this.m_pPosition=e}return Object.defineProperty(e.prototype,"Position",{get:function(){return this.m_pPosition},enumerable:!0,configurable:!0}),e}();e.Player=n,__reflect(n.prototype,"game.Player")}(game||(game={}));var Main=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isThemeLoadEnd=!1,t.isResourceLoadEnd=!1,t}return __extends(t,e),t.fGetIns=function(){return t.s_Ins},t.prototype.createChildren=function(){e.prototype.createChildren.call(this),t.s_Ins=this,e.prototype.createChildren.call(this),this.m_oGameSocket=new game.GameSocket,this.m_oGameSocket.fInitSocket(),console.log("test()");var n=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",n),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.loadingView=new LoadingUI,this.stage.addChild(this.loadingView),RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this),RES.loadConfig("resource/default.res.json","resource/"),game.GameManager.fGetIns().fGetUid()},t.prototype.onConfigComplete=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigComplete,this);var t=new eui.Theme("resource/default.thm.json",this.stage);t.addEventListener(eui.UIEvent.COMPLETE,this.onThemeLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup("preload")},t.prototype.onThemeLoadComplete=function(){this.isThemeLoadEnd=!0,this.createScene()},t.prototype.onResourceLoadComplete=function(e){"preload"==e.groupName&&(this.stage.removeChild(this.loadingView),RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,this.onResourceLoadComplete,this),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),this.isResourceLoadEnd=!0,this.createScene())},t.prototype.createScene=function(){this.isThemeLoadEnd&&this.isResourceLoadEnd&&this.startCreateScene()},t.prototype.onItemLoadError=function(e){console.warn("Url:"+e.resItem.url+" has failed to load")},t.prototype.onResourceLoadError=function(e){console.warn("Group:"+e.groupName+" has failed to load"),this.onResourceLoadComplete(e)},t.prototype.onResourceProgress=function(e){"preload"==e.groupName&&this.loadingView.setProgress(e.itemsLoaded,e.itemsTotal)},t.prototype.fKeyBoard=function(e){console.info(e.target.inputs[0])},t.prototype.startCreateScene=function(){game.CardBase.fCreateCard(game.CardBase.s_Type_Feng,"w_1_0");this.m_oKeyBoard=new KeyBoard,this.m_oKeyBoard.addEventListener(KeyBoard.onkeydown,this.fKeyBoard,this),this.m_oGameLayer=new eui.UILayer,this.addChild(this.m_oGameLayer),this.m_oDialogLayer=new eui.Group,this.addChild(this.m_oDialogLayer),game.ShowLayer.fSetDialogLayer(this.m_oDialogLayer),this.m_oLoadingLayer=new eui.UILayer,this.addChild(this.m_oLoadingLayer),this.m_oLoadingScene=new game.LoadingScene,this.m_oLoadingScene.touchEnabled=!1,this.m_oLoadingScene.touchChildren=!1,this.m_oLoadingLayer.addChild(this.m_oLoadingScene),this.m_oLoadingLayer.visible=!1,this.m_oLoadingLayer.addEventListener(egret.TouchEvent.TOUCH_BEGIN,function(){console.info("sdsddsdsds")},this),setTimeout(function(){console.info("Hall"),game.GameScenenManager.getIns().fEnterScene(game.GameSceneName.HALL)},10);var e,t=RES.getRes("cards_json"),n=t.card,o=0,r=0;for(var a in n){e!=n[a].value&&(o=0);for(var i=0;4>i;i++)game.GameCardManager.fGetIns().fPushCard(n[a].value+"_"+o,n[a].type,r),o++;e=n[a].value,r++}game.GameCardManager.fGetIns().m_oCards},t.prototype.fLoadIngVisible=function(e){this.m_oLoadingLayer.visible=e},t.prototype.fLoadResGroup=function(e,t,n){if(!e||""==e)return n&&n.call(null),void this.fLoadIngVisible(!1);var o=this,r=function(t){if(t.groupName==e){RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE,r,o),RES.removeEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,o.onResourceLoadError,o),RES.removeEventListener(RES.ResourceEvent.GROUP_PROGRESS,o.onResourceProgress,o),RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o.onItemLoadError,o),n&&n.call(null);var a=egret.Tween.get(this.m_oLoadingLayer);a.wait(500).to({alpha:.1},1e3,egret.Ease.sineIn).call(function(){o.fLoadIngVisible(!1)}),console.info("un visible")}};RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,r,this),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,this.onResourceLoadError,this),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,this.onResourceProgress,this),RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,this.onItemLoadError,this),RES.loadGroup(e),this.fLoadIngVisible(!0)},t}(eui.UILayer);__reflect(Main.prototype,"Main");var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,o){function r(e){t.call(o,e)}function a(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),n.call(o))}RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,a,null),RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var game;!function(e){var t=function(e){function t(t){var n=e.call(this,t)||this;return n.endian=egret.Endian.BIG_ENDIAN,n}return __extends(t,e),t.prototype.fReadLong=function(){var e=this.readInt()<<32;return e+this.readInt()},t.prototype.fWriteLong=function(e){var t=0xffffffff00000000&e,n=4294967295&e;this.writeInt(t),this.writeInt(n)},t}(egret.ByteArray);e.GameByteArray=t,__reflect(t.prototype,"game.GameByteArray")}(game||(game={}));var game;!function(e){var t=function(){function e(){}return e.s_C2S_HEARDBEAT=1,e.s_C2S_LOGIN=257,e.s_C2S_CREATEROOM=258,e.s_C2S_JOINROOM=259,e.s_C2S_Ready=512,e.s_C2S_LaunchPai=513,e.s_C2S_BASE=768,e.s_C2S_PLAYHAND=769,e.s_C2S_HU_PAI=770,e.s_C2S_EAT_PAI=771,e.s_C2S_PENG_PAI=772,e.s_C2S_GANG_PAI=773,e}();e.Protocol=t,__reflect(t.prototype,"game.Protocol")}(game||(game={}));var game;!function(e){var t;!function(e){e[e.e_Hall=0]="e_Hall"}(t=e.SocketServerType||(e.SocketServerType={}));var n=function(n){function o(e){void 0===e&&(e=t.e_Hall);var o=n.call(this)||this;return o.m_bReConnect=!1,o.m_aServerConfig=[{ip:"120.76.241.37",port:"8080/RedMahjong/websocket"}],o.m_eServerType=e,o.m_nHearBeatId=0,o.fInitModules(),o}return __extends(o,n),o.prototype.fInitModules=function(){this.m_oLoginMoudle=new e.LoginNetMoudle,this.m_oActionMoudle=new e.ActionMoudle,o.s_aProtocols[e.Protocol.s_C2S_HEARDBEAT]=[],o.s_aProtocols[e.Protocol.s_C2S_HEARDBEAT]=[this,this.fOnHeartBeat]},o.prototype.fOnHeartBeat=function(e){console.info("心跳")},o.prototype.fOnConnect=function(e){var t=this;console.info("连接 已经成功建立！"),clearInterval(this.m_nHearBeatId),this.m_nHearBeatId=setInterval(function(){t.fSendHeartPkt()},6e3)},o.prototype.fSendHeartPkt=function(){var t=new e.C2s_HeartBeat;this.fSendPkt(t)},o.prototype.fSendPkt=function(t){if(this.m_oSocket.connected){var n=new e.GameByteArray,o=t.fWrtie();n.writeShort(o.length+2),n.writeBytes(o),this.m_oSocket.writeBytes(n),this.m_oSocket.flush()}else console.info("服务器已经断开连接")},o.prototype.fOnReceiveMessage=function(t){var n=new e.GameByteArray;if(this.m_oSocket.readBytes(n),n.bytesAvailable>=2){var r=n.readShort();if(n.position-=2,n.bytesAvailable>=r){r=n.readShort();var a=n.readShort();n.position-=4;var i=e.Packet.fCreatePkt(a);i.fRead(n);var s=o.s_aProtocols[i.fGetHead().m_nPktType];s[1].call(s[0],i)}}},o.prototype.fRemoveEvent=function(){this.m_oSocket&&(this.m_oSocket.hasEventListener(egret.Event.CONNECT)&&this.m_oSocket.removeEventListener(egret.Event.CONNECT,this.fOnConnect,this),this.m_oSocket.hasEventListener(egret.ProgressEvent.SOCKET_DATA)&&this.m_oSocket.removeEventListener(egret.ProgressEvent.SOCKET_DATA,this.fOnReceiveMessage,this),this.m_oSocket.hasEventListener(egret.Event.CLOSE)&&this.m_oSocket.removeEventListener(egret.Event.CLOSE,this.fOnClose,this),this.m_oSocket.hasEventListener(egret.IOErrorEvent.IO_ERROR)&&this.m_oSocket.removeEventListener(egret.IOErrorEvent.IO_ERROR,this.fOnSocketError,this))},o.prototype.fCloseSocket=function(){this.m_oSocket&&(this.fRemoveEvent(),this.m_oSocket.close(),this.m_oSocket=null)},o.prototype.fOnSocketError=function(e){this.fOnClose(null)},o.prototype.fOnClose=function(e){this.fRemoveEvent(),this.m_oSocket.connected?"IOS"==egret.Capabilities.os?(this.m_bReConnect=!1,this.fDoReconnect()):(this.m_oSocket.hasEventListener(egret.Event.CLOSE)||this.m_oSocket.addEventListener(egret.Event.CLOSE,this.fOnClose,this),this.m_oSocket.close()):(this.m_bReConnect=!1,this.fDoReconnect()),this.dispatchEvent(new egret.Event("NetError"))},o.prototype.fDoReconnect=function(){1!=this.m_bReConnect&&(this.m_bReConnect=!0,console.info("正在断线重连中..."),this.m_oSocket=new egret.WebSocket,this.m_oSocket.type=egret.WebSocket.TYPE_BINARY,this.m_oSocket.addEventListener(egret.Event.CONNECT,this.fOnConnect,this),this.m_oSocket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.fOnReceiveMessage,this),this.m_oSocket.addEventListener(egret.Event.CLOSE,this.fOnClose,this),this.m_oSocket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.fOnSocketError,this),this.m_oSocket.connect(this.m_aServerConfig[this.m_eServerType].ip,this.m_aServerConfig[this.m_eServerType].port))},o.prototype.fInitSocket=function(){this.fCloseSocket(),this.m_oSocket=new egret.WebSocket,this.m_oSocket.type=egret.WebSocket.TYPE_BINARY,this.m_oSocket.addEventListener(egret.Event.CONNECT,this.fOnConnect,this),this.m_oSocket.addEventListener(egret.ProgressEvent.SOCKET_DATA,this.fOnReceiveMessage,this),this.m_oSocket.addEventListener(egret.Event.CLOSE,this.fOnClose,this),this.m_oSocket.addEventListener(egret.IOErrorEvent.IO_ERROR,this.fOnSocketError,this),this.m_oSocket.connect(this.m_aServerConfig[this.m_eServerType].ip,this.m_aServerConfig[this.m_eServerType].port)},o.s_aProtocols=[],o}(egret.EventDispatcher);e.GameSocket=n,__reflect(n.prototype,"game.GameSocket")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.m_oHead.m_nPktType=e.Protocol.s_C2S_CREATEROOM,n.m_sActionType=e.Packet.s_CreateRoom,n}return __extends(n,t),n.prototype.fWrite=function(){var e=t.prototype.fWrtie.call(this);return e.writeShort(this.m_gameName),e.writeShort(this.m_gameType),e.writeShort(this.m_nPayStyle),e.writeShort(this.m_nCircle),e},n.prototype.fRead=function(e){t.prototype.fRead.call(this,e),this.m_gameName=e.readShort(),this.m_gameType=e.readShort(),this.m_nPayStyle=e.readShort(),this.m_nCircle=e.readShort(),this.fVerifyNumber()},n.prototype.fVerifyNumber=function(){this.m_nPayStyle>=2&&(console.info("C2s_HeartCreateRoomPacket this.m_nPayStyle >= 2, = "+this.m_nPayStyle),alert("C2s_HeartCreateRoomPacket this.m_nPayStyle != 3, = "+this.m_nPayStyle)),this.m_gameType!=e.GameStyle.e_createRooom&&(console.info("C2s_HeartCreateRoomPacket this.m_gameType != e_createRooom, = "+this.m_gameType),alert("C2s_HeartCreateRoomPacket this.m_gameType != e_createRooom, = "+this.m_gameType))},n}(e.Packet);e.C2s_CreateRoomPacket=t,__reflect(t.prototype,"game.C2s_CreateRoomPacket")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var o=t.call(this)||this;return o.m_oHead.m_nPktType=e.Protocol.s_C2S_HEARDBEAT,n.s_nNumber++,o}return __extends(n,t),n.s_nNumber=0,n}(e.Packet);e.C2s_HeartBeat=t,__reflect(t.prototype,"game.C2s_HeartBeat")}(game||(game={}));var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.setProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function o(o){t.call(n,o,e)}if(RES.hasRes(e)){var r=RES.getRes(e);r?o(r):RES.getResAsync(e,o,this)}else RES.getResByUrl(e,o,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var game;!function(e){var t=function(t){function n(n){var o=t.call(this,n)||this;return o.fSetType(e.CardBase.s_Type_Feng),o}return __extends(n,t),n}(e.CardBase);e.FengCard=t,__reflect(t.prototype,"game.FengCard")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.m_oHead.m_nPktType=e.Protocol.s_C2S_EAT_PAI,n.m_sActionType=e.Packet.s_Eat,n.m_nCardsCount=3,n}return __extends(n,t),n.prototype.fWrite=function(){var e=t.prototype.fWrtie.call(this);return e},n.prototype.fRead=function(e){t.prototype.fRead.call(this,e),this.fVerifyNumber()},n.prototype.fVerifyNumber=function(){3!=this.m_nCardsCount&&(console.info("C2s_EatAction this.m_nCardsCount != 3, = "+this.m_nCardsCount),alert("C2s_EatAction this.m_nCardsCount != 3, = "+this.m_nCardsCount))},n}(e.C2s_ActionBase);e.C2s_EatAction=t,__reflect(t.prototype,"game.C2s_EatAction")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.m_oHead.m_nPktType=e.Protocol.s_C2S_LaunchPai,n.m_sActionType=e.Packet.s_LaunchPai,n.m_nCardsCount=52,n}return __extends(n,t),n.prototype.fWrite=function(){var e=t.prototype.fWrtie.call(this);return e},n.prototype.fRead=function(e){t.prototype.fRead.call(this,e),this.fVerifyNumber()},n.prototype.fVerifyNumber=function(){52!=this.m_nCardsCount&&(console.info("C2s_LaunchPaiPacket this.m_nCardsCount != 52, = "+this.m_nCardsCount),alert("C2s_LaunchPaiPacket this.m_nCardsCount != 52, = "+this.m_nCardsCount))},n}(e.C2s_ActionBase);e.C2s_LaunchPaiPacket=t,__reflect(t.prototype,"game.C2s_LaunchPaiPacket")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.m_oHead.m_nPktType=e.Protocol.s_C2S_PLAYHAND,n.m_sActionType=e.Packet.s_PlayHand,n.m_nCardsCount=1,n}return __extends(n,t),n.prototype.fWrite=function(){var e=t.prototype.fWrtie.call(this);return e},n.prototype.fRead=function(e){t.prototype.fRead.call(this,e),this.fVerifyNumber()},n.prototype.fVerifyNumber=function(){1!=this.m_nCardsCount&&(console.info("C2s_PlayHandAction this.m_nCardsCount != 1, = "+this.m_nCardsCount),alert("C2s_PlayHandAction this.m_nCardsCount != 1, = "+this.m_nCardsCount))},n}(e.C2s_ActionBase);e.C2s_PlayHandAction=t,__reflect(t.prototype,"game.C2s_PlayHandAction")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var n=t.call(this)||this;return n.m_oHead.m_nPktType=e.Protocol.s_C2S_Ready,n.m_sActionType=e.Packet.s_ReadyPlay,n.m_nCardsCount=0,n}return __extends(n,t),n.prototype.fWrite=function(){var e=t.prototype.fWrtie.call(this);return e},n.prototype.fRead=function(e){t.prototype.fRead.call(this,e),this.fVerifyNumber()},n.prototype.fVerifyNumber=function(){0!=this.m_nCardsCount&&(console.info("C2s_ReadyPacket this.m_nCardsCount != 0, = "+this.m_nCardsCount),alert("C2s_ReadyPacket this.m_nCardsCount != 0, = "+this.m_nCardsCount))},n}(e.C2s_ActionBase);e.C2s_ReadyPacket=t,__reflect(t.prototype,"game.C2s_ReadyPacket")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.isPressed=!1,t.once(egret.Event.ADDED_TO_STAGE,t.fOnUICreate,t),t}return __extends(t,e),t.prototype.fOnUICreate=function(){if(this.m_sImageUse){var e=this.getChildAt(0);e&&(e.source=this.m_sImageUse)}Utils.fResetAnchor(this),this.includeInLayout=!1,this.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.fOnBegin,this),this.addEventListener(egret.TouchEvent.TOUCH_END,this.fOnEnd,this);var t=Utils.fGetAncestor(this);t.addEventListener(egret.TouchEvent.TOUCH_MOVE,this.fOnMove,this),this.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.fOnOutSide,this)},t.prototype.fSetImage=function(e){this.m_sImageUse=e;var t=this.getChildAt(0);t&&(t.source=this.m_sImageUse)},t.prototype.fRelease=function(){this.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.fOnBegin,this),this.removeEventListener(egret.TouchEvent.TOUCH_END,this.fOnEnd,this);var e=Utils.fGetAncestor(this);e.removeEventListener(egret.TouchEvent.TOUCH_MOVE,this.fOnMove,this),this.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.fOnOutSide,this)},t.prototype.fOnBegin=function(){this.fSetPressed(!0)},t.prototype.fOnEnd=function(){this.isPressed&&this.m_oListenerBind&&this.m_oListenerBind.fOnClick(this),this.fOnTouchRelease()},t.prototype.fOnMove=function(e){var t=this.hitTestPoint(e.stageX,e.stageY);t||this.fOnTouchRelease()},t.prototype.fOnOutSide=function(){this.fOnTouchRelease()},t.prototype.fOnTouchRelease=function(){this.fSetPressed(!1)},t.prototype.fSetPressed=function(e){this.isPressed=e;var t=1;this.isPressed&&(t=1.05),this.scaleX=t,this.scaleY=t},t.prototype.fBindListener=function(e){this.m_oListenerBind=e},t}(eui.Button);e.Button=t,__reflect(t.prototype,"game.Button")}(game||(game={}));var game;!function(e){var t=function(e){function t(n){var o=e.call(this,n)||this;return o.fSetType(t.s_Type_Hua),o}return __extends(t,e),t}(e.CardBase);e.HuaCard=t,__reflect(t.prototype,"game.HuaCard")}(game||(game={}));var game;!function(e){var t=function(){function t(){e.GameSocket.s_aProtocols[e.Protocol.s_C2S_PLAYHAND]=[this,this.fPlayHand],e.GameSocket.s_aProtocols[e.Protocol.s_C2S_Ready]=[this,this.fReady],e.GameSocket.s_aProtocols[e.Protocol.s_C2S_LaunchPai]=[this,this.fReady],e.GameSocket.s_aProtocols[e.Protocol.s_C2S_CREATEROOM]=[this,this.fCreateRoom],this.m_oHandle=new e.Handle}return t.prototype.fPlayHand=function(e){},t.prototype.fReady=function(e){this.m_oHandle.fSendMessage(e.fGetActionType())},t.prototype.fLaunchPai=function(e){this.m_oHandle.fSendMessage(e.fGetActionType(),e)},t.prototype.fCreateRoom=function(e){this.m_oHandle.fSendMessage(e.fGetActionType(),e)},t.prototype.fDispatchPkt=function(e,t){},t}();e.ActionMoudle=t,__reflect(t.prototype,"game.ActionMoudle")}(game||(game={}));var game;!function(e){var t=function(){function t(){e.GameSocket.s_aProtocols[e.Protocol.s_C2S_LOGIN]=[this,this.fOnLogin],this.m_oHandle=new e.Handle}return t.prototype.fOnLogin=function(e){},t}();e.LoginNetMoudle=t,__reflect(t.prototype,"game.LoginNetMoudle")}(game||(game={}));var game;!function(e){var t=function(){function t(){this.m_oCards=[],this.m_oCards=[],console.info("gs")}return t.fGetIns=function(){return t.s_ins||(t.s_ins=new t),t.s_ins},t.prototype.fClear=function(){this.m_oCards=[]},t.prototype.fPushCard=function(t,n,o){var r=e.CardBase.fCreateCard(n,t);o&&(r.m_nPriority=o),this.m_oCards.push(r)},t.prototype.fPushCard1=function(e){this.m_oCards.push(e)},t.prototype.fSplicCard=function(e){var t=0;for(var n in this.m_oCards)e.fGetType()==this.m_oCards[n].fGetType()&&e.fGetValue()==this.m_oCards[n].fGetValue()&&this.m_oCards.splice(t,1),t++},t}();e.GameCardManager=t,__reflect(t.prototype,"game.GameCardManager")}(game||(game={}));var game;!function(e){var t;!function(e){e[e.e_xinPuMj=0]="e_xinPuMj",e[e.e_ganYuMj=1]="e_ganYuMj"}(t=e.GameName||(e.GameName={}));var n;!function(e){e[e.e_createRooom=0]="e_createRooom",e[e.e_joinRoom=1]="e_joinRoom"}(n=e.GameStyle||(e.GameStyle={}));var o=function(){function e(){}return e.prototype.fGetUid=function(){return Utils.fNotUsefunData(this.m_sUid)&&console.warn("NotUsefunData 警告位置："+fGetStack().getFileName()+"第 "+fGetStack().getLineNumber()+" 行"),this.m_sUid},e.fGetIns=function(){return e.s_ins||(e.s_ins=new e),e.s_ins},e}();e.GameManager=o,__reflect(o.prototype,"game.GameManager")}(game||(game={}));var game;!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t.skinName="resource/gameSkins/layer/CreateRoom.exml",t}return __extends(t,e),t.prototype.fOnUICreate=function(){this.fSetClickButton(this.m_radio)},t.prototype.fOnClick=function(e){},t
}(e.ShowLayer);e.CreateRoomLayer=t,__reflect(t.prototype,"game.CreateRoomLayer")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.m_aTopCards=[],e.m_aTopCardsGroup=[],e.m_aButtomCards=[],e.m_aButtomCardsGroup=[],e.m_aLeftCards=[],e.m_aLeftCardsGroup=[],e.m_aRightCards=[],e.m_aRightCardsGroup=[],e.m_aAllGroup=[],e.skinName="resource/gameSkins/layer/GameInitLayer.exml",e}return __extends(n,t),n.prototype.fOnUICreate=function(){this.m_gopTop.visible=!1,this.m_gopButtom.visible=!1,this.m_gopLeft.visible=!1,this.m_gopRight.visible=!1,this.m_aAllGroup[e.PlayePosition.e_Up]=this.m_gopTop},n.prototype.fDeleteImgCard=function(e,t){},n.prototype.fAddReadCards=function(t){var n,o,r,a,i=0;t==e.PlayePosition.e_Left?(o=this.m_gopLeft,n=this.m_aLeftCardsGroup):t==e.PlayePosition.e_Right?(o=this.m_gopRight,n=this.m_aRightCardsGroup):t==e.PlayePosition.e_Down?(o=this.m_gopButtom,n=this.m_aButtomCardsGroup):t==e.PlayePosition.e_Up&&(o=this.m_gopTop,n=this.m_aTopCardsGroup),i=n.length,r=o.getChildByName("m_img0"),a=o.getChildByName("m_img1");var s;t==e.PlayePosition.e_Left||t==e.PlayePosition.e_Right?s="majiangzi_json.pai_gai_bot2_png":(t==e.PlayePosition.e_Up||t==e.PlayePosition.e_Down)&&(s="majiangzi_json.pai_gai_bot1_png");var _=new eui.Group;_.name="m_gop"+i,r=new eui.Image(RES.getRes(s)),r.name="m_img0",a=new eui.Image(RES.getRes(s)),a.name="m_img1",_.addChild(r),_.addChild(a),o.addChild(_),t==e.PlayePosition.e_Left?(this.m_aLeftCardsGroup[i]=_,this.m_aLeftCardsGroup[i].y=25*i,this.m_aLeftCards[2*i]=r,this.m_aLeftCards[2*i].y=7,this.m_aLeftCards[2*i+1]=a):t==e.PlayePosition.e_Right?(this.m_aRightCardsGroup[i]=_,this.m_aRightCardsGroup[i].y=25*i,this.m_aRightCards[2*i]=r,this.m_aRightCards[2*i].y=7,this.m_aRightCards[2*i+1]=a):t==e.PlayePosition.e_Down?(this.m_aButtomCardsGroup[i]=_,this.m_aButtomCardsGroup[i].x=34*i,this.m_aButtomCards[2*i]=r,this.m_aButtomCards[2*i].y=10.64,this.m_aButtomCards[2*i+1]=a):t==e.PlayePosition.e_Up&&(this.m_aTopCardsGroup[i]=_,this.m_aTopCardsGroup[i].x=34*i,this.m_aTopCards[2*i]=r,this.m_aTopCards[2*i].y=10.64,this.m_aTopCards[2*i+1]=a)},n.prototype.fGameReady=function(){this.m_gopTop.visible=!0,this.m_gopButtom.visible=!0,this.m_gopLeft.visible=!0,this.m_gopRight.visible=!0;for(var t=1;26>t;t++)this.fAddReadCards(e.PlayePosition.e_Up),this.fAddReadCards(e.PlayePosition.e_Down);for(var t=0;17>t;t++)this.fAddReadCards(e.PlayePosition.e_Left),this.fAddReadCards(e.PlayePosition.e_Right);for(var n=e.C2s_ActionBase.CreateAction(e.C2s_ActionBase.s_LaunchPai),o=e.GameCardManager.fGetIns().m_oCards,r=[],a=e.PlayePosition.e_Up;a<e.PlayePosition.e_Right;a++)for(var t=0;13>t;t++){var i=0;for(var s in o)void 0==o[s].m_pBelong&&++i;var _=Utils.fGetRandomNum(1,i);o[_].m_pBelong=a,r.push(o[_])}n.fSetCards(r),Main.fGetIns().m_oGameSocket.m_oActionMoudle.fLaunchPai(n);for(var c in o)if(o[c].m_pBelong){this.m_gopButtom}},n.prototype.fOnClick=function(e){console.info("button")},n}(e.Scene);e.GameInitLayer=t,__reflect(t.prototype,"game.GameInitLayer")}(game||(game={}));var game;!function(e){var t=function(t){function o(){return t.call(this)||this}return __extends(o,t),o.getIns=function(){return o.s_Ins||(o.s_Ins=new o),o.s_Ins},o.prototype.fEnterScene=function(e){var t=this.fGetTopScene();t!=e&&this.fAddScene(e),this.fChangeToScene(e)},o.prototype.fChangeToScene=function(e){var t=Main.fGetIns(),n=this.m_oCurrentScene;n&&(n.parent.removeChild(n),n.fRelease()),this.m_oCurrentScene=o.fCreateScene(e);var r=this,a=function(){t.m_oGameLayer.addChild(r.m_oCurrentScene),r.m_oCurrentScene.alpha=0;var e=egret.Tween.get(r.m_oCurrentScene);e.wait(800).to({alpha:1},5e3,egret.Ease.sineIn)};t.fLoadResGroup(this.m_oCurrentScene.fSceneResGroup(),!0,a)},o.prototype.fBackToLastScene=function(){this.fGetSceneStackLength()>1&&(this.fPop(),this.fChangeToScene(this.fGetTopScene()))},o.prototype.fGetCurrentGameScene=function(){return this.fGetTopScene()},o.fCreateScene=function(t){var o;switch(t){case n.LOGIN:o=new e.LoadingScene;break;case n.HALL:o=new e.HallScene;break;case n.MAIN:o=new e.MainScene;break;default:alert("fCreateScene fail "+t)}return o},o}(e.SceneManager);e.GameScenenManager=t,__reflect(t.prototype,"game.GameScenenManager");var n;!function(e){e[e.LOGIN=0]="LOGIN",e[e.HALL=1]="HALL",e[e.MAIN=2]="MAIN"}(n=e.GameSceneName||(e.GameSceneName={}))}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.skinName="resource/gameSkins/scene/HallScene.exml",e}return __extends(n,t),n.prototype.fSceneResGroup=function(){return"hall"},n.prototype.fOnUICreate=function(){this.fSetClickButton(this.m_btnJoin),this.fSetClickButton(this.m_btnCreate);this.m_oHandle.fReceiveOnce(this,function(e){},e.C2s_ActionBase.s_CreateRoom)},n.prototype.fOnClick=function(t){if(t==this.m_btnCreate){var n=new e.CreateRoomLayer;n.fShow()}},n}(e.Scene);e.HallScene=t,__reflect(t.prototype,"game.HallScene")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.skinName="resource/gameSkins/layer/LaunchPaiLayer.exml",e}return __extends(n,t),n.prototype.fOnUICreate=function(){this.m_gopDown.visible=!1;var t=this;this.m_oHandle.fReceiveOnce(this,function(e){t.m_gopDown.visible=!0,t.m_oLaunchPacket=e.m_oDisObj;var n=t.m_oLaunchPacket.fGetCards();for(var o in n)t.fAddReadCards(n[o].fGetType(),n[o].fGetValue(),n[o].m_pBelong)},e.C2s_ActionBase.s_LaunchPai)},n.prototype.fAddReadCards=function(t,n,o){if(o==e.PlayePosition.e_Down){var r=this.m_gopDown.numChildren,a=new eui.Image(RES.getRes("majiangzi_json.pai_user_wan9_png"));a.x=74*r,this.m_gopDown.addChild(a),console.info("index= "+r)}},n.prototype.fLaunchPai=function(){this.m_gopDown.visible=!0;for(var t=1;12>t;t++)this.fAddReadCards("","",e.PlayePosition.e_Up)},n.prototype.fOnClick=function(e){console.info("button")},n}(e.Scene);e.LaunchPaiLayer=t,__reflect(t.prototype,"game.LaunchPaiLayer")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.m_bCreated=!1,e.bTips=!1,e.skinName="resource/gameSkins/scene/LoadingScene.exml",e}return __extends(n,t),n.prototype.fOnUICreate=function(){this.touchEnabled=!1,this.touchChildren=!1,t.prototype.fOnUICreate.call(this),this.m_bCreated=!0,this.m_oProgress=new e.Progress(this.m_imgProgressL,this.m_imgProgressR),this.m_oProgress.setCurProgress(0),this.bTips&&this.fShowTips()},n.prototype.fSetProgress=function(e){if(this.m_oProgress){this.m_oProgress.setCurProgress(e);Math.floor(100*e)}},n.prototype.fShowTips=function(){},n.prototype.fStartHelpTips=function(){this.bTips=!0,this.fShowTips()},n}(e.Scene);e.LoadingScene=t,__reflect(t.prototype,"game.LoadingScene")}(game||(game={}));var game;!function(e){var t=function(t){function n(){var e=t.call(this)||this;return e.skinName="resource/gameSkins/scene/MainScene.exml",e}return __extends(n,t),n.prototype.fSceneResGroup=function(){return"hall"},n.prototype.fOnUICreate=function(){this.fSetClickButton(this.m_btnReady),this.m_oGameInitLayer=new e.GameInitLayer,this.addChild(this.m_oGameInitLayer),this.m_oLaunchLayer=new e.LaunchPaiLayer,this.addChild(this.m_oLaunchLayer);var t=this;this.m_oHandle.fReceiveOnce(this,function(e){t.m_oGameInitLayer.fGameReady()},e.C2s_ActionBase.s_ReadyPlay)},n.prototype.fOnClick=function(t){console.info("button");var n=e.C2s_ActionBase.CreateAction(e.C2s_ActionBase.s_ReadyPlay);Main.fGetIns().m_oGameSocket.m_oActionMoudle.fReady(n),this.m_btnReady.fRelease(),this.m_btnReady.parent.removeChild(this.m_btnReady)},n}(e.Scene);e.MainScene=t,__reflect(t.prototype,"game.MainScene")}(game||(game={}));var game;!function(e){var t=function(){function t(e,t){this.m_nCurrentProgress=0,this.m_oCurProgressL=e,this.m_oCurProgressR=t,this.fInit()}return t.prototype.fInit=function(){this.m_nProgressY=this.m_oCurProgressL.y,this.m_nProgressHeight=this.m_oCurProgressR.height,this.m_oCurProgressAnimat=new e.ProgressAnimation(this.m_oCurProgressL,this.m_oCurProgressR,this.m_oCurProgressL.x,this.m_oCurProgressL.width)},t.prototype.setCurProgress=function(e,t,n){this.m_nCurrentProgress=e,this.setProgress(this.m_oCurProgressAnimat,e,t,n)},t.prototype.setProgress=function(e,t,n,o){var r=!1;if(void 0!=n&&(r=n),egret.Tween.removeTweens(e),r){var a=500,i=egret.Tween.get(e);i.to({progress:t},a),o&&i.call(o)}else e.progress=t},t}();e.Progress=t,__reflect(t.prototype,"game.Progress")}(game||(game={}));var game;!function(e){var t=function(){function e(e,t,n,o){this.currentProgress=0,this.leftBar=e,this.rightBar=t,this.startX=n,this.progressWidth=o}return Object.defineProperty(e.prototype,"progress",{get:function(){return this.currentProgress},set:function(e){this.fSetProgress(e)},enumerable:!0,configurable:!0}),e.prototype.fSetProgress=function(e){var t=e;0>t?t=0:t>1&&(t=1),this.currentProgress=t,this.fSetProgressBase(this.leftBar,this.rightBar,this.startX,t)},e.prototype.fSetProgressBase=function(e,t,n,o){var r=(e.width,Math.floor(o*this.progressWidth)),a=Math.ceil(r/2),i=Math.floor(r/2);Utils.fClipDisplay(e,0,0,a,e.height,n,e.y),Utils.fClipDisplay(t,e.width-i,0,i,e.height,n+a,e.y)},e}();e.ProgressAnimation=t,__reflect(t.prototype,"game.ProgressAnimation")}(game||(game={}));var Utils=function(){function e(){}return e.fResetAnchor=function(e,t,n){var o=e.width,r=e.height,a=.5,i=.5;void 0!=t&&(a=t),void 0!=n&&(i=n);var s=a*o,_=i*r;if(e instanceof eui.Label){var c=e;o=c.measuredWidth,r=c.measuredHeight}var h=e.x,u=e.y,f=h+s-e.anchorOffsetX,m=u+_-e.anchorOffsetY;e.anchorOffsetX=s,e.anchorOffsetY=_,e.x=f,e.y=m},e.fNotUsefunData=function(e){return void 0==e||null==e||""==e?!0:!1},e.fGetAncestor=function(e){for(var t=e;t.parent;)t=t.parent;return t},e.fClipDisplay=function(e,t,n,o,r,a,i){e.mask||(e.mask=new egret.Rectangle),e.mask.x=t,e.mask.y=n,e.mask.width=o,e.mask.height=r,e.x=a-t,e.y=i-n},e.fGetRandomNum=function(e,t){var n=t-e,o=Math.random();return e+Math.round(o*n)},e}();__reflect(Utils.prototype,"Utils");